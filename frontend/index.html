<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dental Clinic Management System</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ü¶∑ Dental Clinic Management System</h1>
            <nav class="tabs">
                <button class="tab-btn active" data-tab="patients">Patients</button>
                <button class="tab-btn" data-tab="appointments">Appointments</button>
                <button class="tab-btn" data-tab="employees">Employees</button>
                <button class="tab-btn" data-tab="treatments">Treatments</button>
                <button class="tab-btn" data-tab="appointment-treatments">Appointment Treatments</button>
                <button class="tab-btn" data-tab="financial">Financial Records</button>
                <button class="tab-btn" data-tab="reports">Reports</button>
                <button class="tab-btn" data-tab="admin">Admin</button>
            </nav>
        </header>

        <main>
            <!-- Patients Section -->
            <section id="patients" class="tab-content active">
                <h2>Patients Management</h2>
                <div class="section-header">
                    <button class="btn btn-primary" onclick="showPatientForm()">+ Add Patient</button>
                    <button class="btn btn-secondary" onclick="loadPatients()">Refresh</button>
                </div>
                
                <div id="patient-form" class="form-modal" style="display: none;">
                    <div class="form-content">
                        <h3 id="patient-form-title">Add Patient</h3>
                        <form id="patientForm" onsubmit="savePatient(event)">
                            <input type="hidden" id="patient-id">
                            <div class="form-group">
                                <label>Patient ID:</label>
                                <input type="text" id="patient-patientID" required>
                            </div>
                            <div class="form-group">
                                <label>First Name:</label>
                                <input type="text" id="patient-pfirst_name" required>
                            </div>
                            <div class="form-group">
                                <label>Last Name:</label>
                                <input type="text" id="patient-plast_name" required>
                            </div>
                            <div class="form-group">
                                <label>Date of Birth:</label>
                                <input type="date" id="patient-pDOB" required>
                            </div>
                            <div class="form-group">
                                <label>Address:</label>
                                <input type="text" id="patient-paddress" required>
                            </div>
                            <div class="form-group">
                                <label>Phone:</label>
                                <input type="tel" id="patient-pphone" required>
                            </div>
                            <div class="form-group">
                                <label>Email:</label>
                                <input type="email" id="patient-pemail" required>
                            </div>
                            <div class="form-group">
                                <label>Medical History:</label>
                                <textarea id="patient-medical_history" rows="3"></textarea>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Save</button>
                                <button type="button" class="btn btn-secondary" onclick="closePatientForm()">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>

                <div id="patients-table" class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>DOB</th>
                                <th>Phone</th>
                                <th>Email</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="patients-tbody"></tbody>
                    </table>
                </div>
            </section>

            <!-- Appointments Section -->
            <section id="appointments" class="tab-content">
                <h2>Appointments Management</h2>
                <div class="section-header">
                    <button class="btn btn-primary" onclick="showAppointmentForm()">+ Add Appointment</button>
                    <button class="btn btn-secondary" onclick="loadAppointments()">Refresh</button>
                </div>
                
                <div id="appointment-form" class="form-modal" style="display: none;">
                    <div class="form-content">
                        <h3 id="appointment-form-title">Add Appointment</h3>
                        <form id="appointmentForm" onsubmit="saveAppointment(event)">
                            <input type="hidden" id="appointment-id">
                            <div class="form-group">
                                <label>Appointment ID:</label>
                                <input type="text" id="appointment-appointmentID" required>
                            </div>
                            <div class="form-group">
                                <label>Patient ID:</label>
                                <input type="text" id="appointment-patientID" required>
                            </div>
                            <div class="form-group">
                                <label>Date & Time:</label>
                                <input type="datetime-local" id="appointment-date" required>
                            </div>
                            <div class="form-group">
                                <label>Status:</label>
                                <select id="appointment-status" required>
                                    <option value="Scheduled">Scheduled</option>
                                    <option value="Attended">Attended</option>
                                    <option value="Missed">Missed</option>
                                    <option value="Cancelled">Cancelled</option>
                                </select>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Save</button>
                                <button type="button" class="btn btn-secondary" onclick="closeAppointmentForm()">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>

                <div id="appointments-table" class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Patient</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="appointments-tbody"></tbody>
                    </table>
                </div>
            </section>

            <!-- Employees Section -->
            <section id="employees" class="tab-content">
                <h2>Employees Management</h2>
                <div class="section-header">
                    <button class="btn btn-primary" onclick="showEmployeeForm()">+ Add Employee</button>
                    <button class="btn btn-secondary" onclick="loadEmployees()">Refresh</button>
                </div>
                
                <div id="employee-form" class="form-modal" style="display: none;">
                    <div class="form-content">
                        <h3 id="employee-form-title">Add Employee</h3>
                        <form id="employeeForm" onsubmit="saveEmployee(event)">
                            <input type="hidden" id="employee-id">
                            <div class="form-group">
                                <label>Employee ID:</label>
                                <input type="text" id="employee-empID" required>
                            </div>
                            <div class="form-group">
                                <label>First Name:</label>
                                <input type="text" id="employee-efirst_name" required>
                            </div>
                            <div class="form-group">
                                <label>Last Name:</label>
                                <input type="text" id="employee-elast_name" required>
                            </div>
                            <div class="form-group">
                                <label>Phone:</label>
                                <input type="tel" id="employee-ephone_num" required>
                            </div>
                            <div class="form-group">
                                <label>Email:</label>
                                <input type="email" id="employee-eemail" required>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Save</button>
                                <button type="button" class="btn btn-secondary" onclick="closeEmployeeForm()">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>

                <div id="employees-table" class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Phone</th>
                                <th>Email</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="employees-tbody"></tbody>
                    </table>
                </div>
            </section>

            <!-- Treatments Section -->
            <section id="treatments" class="tab-content">
                <h2>Treatments Management</h2>
                <div class="section-header">
                    <button class="btn btn-primary" onclick="showTreatmentForm()">+ Add Treatment</button>
                    <button class="btn btn-secondary" onclick="loadTreatments()">Refresh</button>
                </div>
                
                <div id="treatment-form" class="form-modal" style="display: none;">
                    <div class="form-content">
                        <h3 id="treatment-form-title">Add Treatment</h3>
                        <form id="treatmentForm" onsubmit="saveTreatment(event)">
                            <input type="hidden" id="treatment-id">
                            <div class="form-group">
                                <label>Treatment ID:</label>
                                <input type="text" id="treatment-treatmentID" required>
                            </div>
                            <div class="form-group">
                                <label>Treatment Name:</label>
                                <input type="text" id="treatment-treatmentName" required>
                            </div>
                            <div class="form-group">
                                <label>Cost:</label>
                                <input type="number" step="0.01" id="treatment-cost" required>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Save</button>
                                <button type="button" class="btn btn-secondary" onclick="closeTreatmentForm()">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>

                <div id="treatments-table" class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Cost</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="treatments-tbody"></tbody>
                    </table>
                </div>
            </section>

            <!-- Appointment Treatments Section -->
            <section id="appointment-treatments" class="tab-content">
                <h2>Appointment Treatments</h2>
                <div class="section-header">
                    <button class="btn btn-primary" onclick="showAppointmentTreatmentForm()">+ Add Appointment Treatment</button>
                    <button class="btn btn-secondary" onclick="loadAppointmentTreatments()">Refresh</button>
                </div>
                
                <div id="appointment-treatment-form" class="form-modal" style="display: none;">
                    <div class="form-content">
                        <h3 id="appointment-treatment-form-title">Add Appointment Treatment</h3>
                        <form id="appointmentTreatmentForm" onsubmit="saveAppointmentTreatment(event)">
                            <input type="hidden" id="appointment-treatment-id">
                            <div class="form-group">
                                <label>Appointment Treatment ID:</label>
                                <input type="text" id="appointment-treatment-apptTreatID" required>
                            </div>
                            <div class="form-group">
                                <label>Appointment ID:</label>
                                <input type="text" id="appointment-treatment-appointmentID" required>
                            </div>
                            <div class="form-group">
                                <label>Treatment ID:</label>
                                <input type="text" id="appointment-treatment-treatmentID" required>
                            </div>
                            <div class="form-group">
                                <label>Quantity:</label>
                                <input type="number" id="appointment-treatment-quantity" value="1" min="1" required>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Save</button>
                                <button type="button" class="btn btn-secondary" onclick="closeAppointmentTreatmentForm()">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>

                <div id="appointment-treatments-table" class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Appointment ID</th>
                                <th>Treatment ID</th>
                                <th>Quantity</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="appointment-treatments-tbody"></tbody>
                    </table>
                </div>
            </section>

            <!-- Financial Records Section -->
            <section id="financial" class="tab-content">
                <h2>Financial Records</h2>
                <div class="section-header">
                    <button class="btn btn-primary" onclick="showFinancialForm()">+ Add Financial Record</button>
                    <button class="btn btn-secondary" onclick="loadFinancialRecords()">Refresh</button>
                </div>
                
                <div id="financial-form" class="form-modal" style="display: none;">
                    <div class="form-content">
                        <h3 id="financial-form-title">Add Financial Record</h3>
                        <form id="financialForm" onsubmit="saveFinancialRecord(event)">
                            <input type="hidden" id="financial-id">
                            <div class="form-group">
                                <label>Financial Record ID:</label>
                                <input type="text" id="financial-financialID" required>
                            </div>
                            <div class="form-group">
                                <label>Appointment Treatment ID:</label>
                                <input type="text" id="financial-apptTreatID" required>
                            </div>
                            <div class="form-group">
                                <label>Amount:</label>
                                <input type="number" step="0.01" id="financial-amount" required>
                            </div>
                            <div class="form-group">
                                <label>Status:</label>
                                <select id="financial-status" required>
                                    <option value="Paid">Paid</option>
                                    <option value="Pending">Pending</option>
                                    <option value="Overdue">Overdue</option>
                                </select>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Save</button>
                                <button type="button" class="btn btn-secondary" onclick="closeFinancialForm()">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>

                <div id="financial-table" class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Appt Treatment ID</th>
                                <th>Amount</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="financial-tbody"></tbody>
                    </table>
                </div>
            </section>

            <!-- Reports Section -->
            <section id="reports" class="tab-content">
                <h2>Advanced Reports</h2>
                <div class="reports-grid">
                    <div class="report-card">
                        <h3>Patients Who Attended (No Missed)</h3>
                        <p>Patients who attended at least one appointment and never missed</p>
                        <button class="btn btn-primary" onclick="loadReport('attended_no_missed', 'report1')">Generate Report</button>
                        <div id="report1" class="report-result"></div>
                    </div>
                    
                    <div class="report-card">
                        <h3>Above Average Appointments</h3>
                        <p>Patients with appointment count above average</p>
                        <button class="btn btn-primary" onclick="loadReport('above_avg_appointments', 'report2')">Generate Report</button>
                        <div id="report2" class="report-result"></div>
                    </div>
                    
                    <div class="report-card">
                        <h3>Unassigned Employees</h3>
                        <p>Employees not assigned to any role</p>
                        <button class="btn btn-primary" onclick="loadReport('unassigned_employees', 'report3')">Generate Report</button>
                        <div id="report3" class="report-result"></div>
                    </div>
                    
                    <div class="report-card">
                        <h3>Secretaries Working</h3>
                        <p>Secretaries working on specific dates</p>
                        <button class="btn btn-primary" onclick="loadReport('secretaries_working', 'report4')">Generate Report</button>
                        <div id="report4" class="report-result"></div>
                    </div>
                    
                    <div class="report-card">
                        <h3>Top 3 Treatments</h3>
                        <p>Top 3 earning treatments</p>
                        <button class="btn btn-primary" onclick="loadReport('top3_treatments', 'report5')">Generate Report</button>
                        <div id="report5" class="report-result"></div>
                    </div>
                    
                    <div class="report-card">
                        <h3>Average Costs</h3>
                        <p>Average cost per treatment with pending/overdue counts</p>
                        <button class="btn btn-primary" onclick="loadReport('avg_costs', 'report6')">Generate Report</button>
                        <div id="report6" class="report-result"></div>
                    </div>
                </div>
            </section>

            <!-- Admin Section -->
            <section id="admin" class="tab-content">
                <h2>Database Administration</h2>
                <div class="admin-actions">
                    <div class="admin-card">
                        <h3>Create Tables</h3>
                        <p>Initialize database tables</p>
                        <button class="btn btn-primary" onclick="adminAction('create')">Create Tables</button>
                    </div>
                    <div class="admin-card">
                        <h3>Populate Data</h3>
                        <p>Seed database with sample data</p>
                        <button class="btn btn-primary" onclick="adminAction('populate')">Populate Data</button>
                    </div>
                    <div class="admin-card danger">
                        <h3>Drop Tables</h3>
                        <p>‚ö†Ô∏è Delete all tables (irreversible)</p>
                        <button class="btn btn-danger" onclick="adminAction('drop')">Drop Tables</button>
                    </div>
                </div>
                <div id="admin-message" class="message"></div>
            </section>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>

